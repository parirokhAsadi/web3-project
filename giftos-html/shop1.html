<!DOCTYPE html>
<html>

<head>
  <!-- Basic -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <!-- Mobile Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <!-- Site Metas -->
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta name="author" content="" />
  <link rel="shortcut icon" href="images/favicon.png" type="image/x-icon">
  <link rel="stylesheet" href="../jquery-ui-1.13.2.custom/jquery-ui.css">
  <link rel="stylesheet" href="/resources/demos/style.css">


  <title>
    Giftos
  </title>

  <!-- slider stylesheet -->
  <link rel="stylesheet" type="text/css"
    href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" />

  <!-- bootstrap core css -->
  <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />

  <!-- Custom styles for this template -->
  <link href="css/style.css" rel="stylesheet" />
  <!-- responsive style -->
  <link href="css/responsive.css" rel="stylesheet" />

  <link rel="stylesheet" href="jquery-ui-1.13.2.custom/jquery-ui.css">

</head>

<body>
  <div class="hero_area">
    <!-- header section strats -->
    <header class="header_section">
      <nav class="navbar navbar-expand-lg custom_nav-container ">
        <a class="navbar-brand" href="index.html">
          <span>
            Giftos
          </span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class=""></span>
        </button>

        <div class="collapse navbar-collapse innerpage_navbar" id="navbarSupportedContent">
          <ul class="navbar-nav  ">
            <li class="nav-item ">
              <a class="nav-link" href="index.html">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" href="shop1.html">
                Shop
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="why.html">
                Why Us
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="testimonial.html">
                Testimonial
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="contact.html">Contact Us</a>
            </li>
          </ul>
          <div class="user_option">
            <a href="login.html">
              <i class="fa fa-user" aria-hidden="true"></i>
              <span>
                Login
              </span>
            </a>

            <i onclick="showsidnav()" onmousedown="party.confetti(this)" class="fa fa-shopping-bag" aria-hidden="true"
              style="margin-right: 15px;"></i>

            <form class="form-inline ">
              <button class="btn nav_search-btn" type="submit">
                <i class="fa fa-search" aria-hidden="true"></i>
              </button>
            </form>
          </div>
        </div>
      </nav>
    </header>
    <!-- end header section -->

  </div>
  <!-- end hero area -->

  <!-- shop section -->

  <section class="shop_section layout_padding">
    <div class="container">

      <div id="sidnav"
        style="position: fixed;top: 0;right: -300px;width: 300px;height: 100%;background-color:#db4f66;color: white;z-index: 700;">
        <button onclick="hidesidnav()" style="position: absolute;top: 10px;right: 10px;display: block;">x</button>
        <h3 style="padding-left: 10px;margin-top: 200px;">Cart</h3>
        <ul id="cartItem" style="padding: 20PX;margin: 10px;border: 1px solid rgb(255, 255, 255);">

        </ul>
        <div style="display: flex;width: 100%;justify-content: center;">
          <button onclick="sure()"
            style="padding: 15px;background-color: aliceblue;color: #db4f66;border: 2px solid #db4f66;border-radius: 5px;">
            payment</button>
        </div>
      </div>

      <div class="heading_container heading_center">
        <h2 id="asyncExec"></h2>
      </div>





      <p>
        <label for="amount">Price range:</label>
        <input type="text" id="amount" readonly style="border:0; color:#f6931f; font-weight:bold;">
      </p>

      <div id="slider-range"></div>
      <div id="products" class="row"></div>

      <div class="row">

        <!-- <div class="col-sm-6 col-md-4 col-lg-3">
          <div class="box">
            <a href="">
              <div class="img-box">
                <img src="images/p1.png" alt="">
              </div>
              <div class="detail-box">
                <h6>
                  Ring
                </h6>
                <h6>
                  Price
                  <span>
                    $200
                  </span>
                </h6>
              </div>
              <div class="new">
                <span>
                  New
                </span>
              </div>
            </a>
          </div>
        </div>
        <div class="col-sm-6 col-md-4 col-lg-3">
          <div class="box">
            <a href="">
              <div class="img-box">
                <img src="images/p2.png" alt="">
              </div>
              <div class="detail-box">
                <h6>
                  Watch
                </h6>
                <h6>
                  Price
                  <span>
                    $300
                  </span>
                </h6>
              </div>
              <div class="new">
                <span>
                  New
                </span>
              </div>
            </a>
          </div>
        </div>
        <div class="col-sm-6 col-md-4 col-lg-3">
          <div class="box">
            <a href="">
              <div class="img-box">
                <img src="images/p3.png" alt="">
              </div>
              <div class="detail-box">
                <h6>
                  Teddy Bear
                </h6>
                <h6>
                  Price
                  <span>
                    $110
                  </span>
                </h6>
              </div>
              <div class="new">
                <span>
                  New
                </span>
              </div>
            </a>
          </div>
        </div>
        <div class="col-sm-6 col-md-4 col-lg-3">
          <div class="box">
            <a href="">
              <div class="img-box">
                <img src="images/p4.png" alt="">
              </div>
              <div class="detail-box">
                <h6>
                  Flower Bouquet
                </h6>
                <h6>
                  Price
                  <span>
                    $45
                  </span>
                </h6>
              </div>
              <div class="new">
                <span>
                  New
                </span>
              </div>
            </a>
          </div>
        </div>
        <div class="col-sm-6 col-md-4 col-lg-3">
          <div class="box">
            <a href="">
              <div class="img-box">
                <img src="images/p5.png" alt="">
              </div>
              <div class="detail-box">
                <h6>
                  Teddy Bear
                </h6>
                <h6>
                  Price
                  <span>
                    $95
                  </span>
                </h6>
              </div>
              <div class="new">
                <span>
                  New
                </span>
              </div>
            </a>
          </div>
        </div>
        <div class="col-sm-6 col-md-4 col-lg-3">
          <div class="box">
            <a href="">
              <div class="img-box">
                <img src="images/p6.png" alt="">
              </div>
              <div class="detail-box">
                <h6>
                  Flower Bouquet
                </h6>
                <h6>
                  Price
                  <span>
                    $70
                  </span>
                </h6>
              </div>
              <div class="new">
                <span>
                  New
                </span>
              </div>
            </a>
          </div>
        </div>
        <div class="col-sm-6 col-md-4 col-lg-3">
          <div class="box">
            <a href="">
              <div class="img-box">
                <img src="images/p7.png" alt="">
              </div>
              <div class="detail-box">
                <h6>
                  Watch
                </h6>
                <h6>
                  Price
                  <span>
                    $400
                  </span>
                </h6>
              </div>
              <div class="new">
                <span>
                  New
                </span>
              </div>
            </a>
          </div>
        </div>
        <div class="col-sm-6 col-md-4 col-lg-3">
          <div class="box">
            <a href="">
              <div class="img-box">
                <img src="images/p8.png" alt="">
              </div>
              <div class="detail-box">
                <h6>
                  Ring
                </h6>
                <h6>
                  Price
                  <span>
                    $450
                  </span>
                </h6>
              </div>
              <div class="new">
                <span>
                  New
                </span>
              </div>
            </a>
          </div>
        </div> -->
      </div>

      <div class="btn-box buttom">
        <a href="">
          View All Products
        </a>
      </div>
    </div>
  </section>

  <!-- end shop section -->

  <!-- datepicker -->
  <div class="p-5 flex justify-content-center mb-5"
    style="background-color: #db4f66;margin-right: 45px;margin-left: 45px;">
    <h5 style="color: aliceblue;margin-bottom: 30px;">please choose the best time for delivery</h5>
    <label for="from">From</label>
    <input type="text" id="from" name="from">
    <label for="to">to</label>
    <input type="text" id="to" name="to">


  </div>

  <!-- info section -->

  <section class="info_section  layout_padding2-top">
    <div class="social_container">
      <div class="social_box">
        <a href="">
          <i class="fa fa-facebook" aria-hidden="true"></i>
        </a>
        <a href="">
          <i class="fa fa-twitter" aria-hidden="true"></i>
        </a>
        <a href="">
          <i class="fa fa-instagram" aria-hidden="true"></i>
        </a>
        <a href="">
          <i class="fa fa-youtube" aria-hidden="true"></i>
        </a>
      </div>
    </div>
    <div class="info_container ">
      <div class="container">
        <div class="row">
          <div class="col-md-6 col-lg-3">
            <h6>
              ABOUT US
            </h6>

            <p>
              Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed doLorem ipsum dolor sit amet, consectetur
              adipiscing elit, sed doLorem ipsum dolor sit amet,
            </p>
          </div>
          <div class="col-md-6 col-lg-3">
            <div class="info_form ">
              <h5>
                Newsletter
              </h5>
              <form action="#">
                <input type="email" placeholder="Enter your email">
                <button>
                  Subscribe
                </button>
              </form>
            </div>
          </div>
          <div class="col-md-6 col-lg-3">
            <h6>
              NEED HELP
            </h6>
            <p>
              Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed doLorem ipsum dolor sit amet, consectetur
              adipiscing elit, sed doLorem ipsum dolor sit amet,
            </p>
          </div>
          <div class="col-md-6 col-lg-3">
            <h6>
              CONTACT US
            </h6>
            <div class="info_link-box">
              <a href="">
                <i class="fa fa-map-marker" aria-hidden="true"></i>
                <span> Gb road 123 london Uk </span>
              </a>
              <a href="">
                <i class="fa fa-phone" aria-hidden="true"></i>
                <span>+01 12345678901</span>
              </a>
              <a href="">
                <i class="fa fa-envelope" aria-hidden="true"></i>
                <span> demo@gmail.com</span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- footer section -->
    <footer class=" footer_section">
      <div class="container">
        <p>
          &copy; <span id="displayYear"></span> All Rights Reserved By
          <a href="https://html.design/">Free Html Templates</a>
        </p>
      </div>
    </footer>
    <!-- footer section -->

  </section>

  <!-- end info section -->


  <!-- <script src="js/bootstrap.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js">
  </script> -->
  <script src="https://cdn.jsdelivr.net/npm/party-js@latest/bundle/party.min.js"></script>
  <script src="js/custom.js"></script>
  <script src="https://unpkg.com/typeit@8.8.0/dist/index.umd.js"></script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
    crossorigin="anonymous"></script>
  <script src="../jquery-ui-1.13.2.custom/jquery-ui.js"></script>
  <script>

    new TypeIt("#asyncExec", {
      waitUntilVisible: true,
    })
      .type("LATEST ")
      .exec(async () => {
        //-- Return a promise that resolves after something happens.
        await new Promise((resolve, reject) => {
          setTimeout(() => {
            return resolve();
          }, 2000);
        });
      })
      .type("PRODUCTS")
      .go();






    let products = [{
      id: "1",
      img: "images/p1.png",
      title: "Ring",
      discription: "iejfu iewjhfu fuwh",
      price: 720,
      mojodi: "9"
    }, {
      id: "2",
      img: "images/p2.png",
      title: "Watch",
      discription: "hsvbhjf fuvhdf uifh",
      price: 560,
      mojodi: "7"
    }, {
      id: "3",
      img: "images/p3.png",
      title: "Teddy",
      discription: "efui uhfui nuihu ",
      price: 620,
      mojodi: "5"
    }, {
      id: "4",
      img: "images/p4.png",
      title: "flower",
      discription: "efui uhfui nuihu ",
      price: 480,
      mojodi: "5"
    }, {
      id: "5",
      img: "images/p5.png",
      title: "Teddy",
      discription: "efui uhfui nuihu ",
      price: 420,
      mojodi: "5"
    }, {
      id: "6",
      img: "images/p6.png",
      title: "flower",
      discription: "efui uhfui nuihu ",
      price: 450,
      mojodi: "5"
    }, {
      id: "7",
      img: "images/p7.png",
      title: "ring",
      discription: "efui uhfui nuihu ",
      price: 600,
      mojodi: "5"
    }, {
      id: "8",
      img: "images/p8.png",
      title: "mahsol3",
      discription: "efui uhfui nuihu ",
      price: 650,
      mojodi: "5"
    }, {
      id: "9",
      img: "images/p3.png",
      title: "mahsol3",
      discription: "efui uhfui nuihu ",
      price: 460,
      mojodi: "5"
    }, {
      id: "10",
      img: "images/p1.png",
      title: "mahsol3",
      discription: "efui uhfui nuihu ",
      price: 550,
      mojodi: "5"
    }, {
      id: "11",
      img: "images/p2.png",
      title: "mahsol3",
      discription: "efui uhfui nuihu ",
      price: 400,
      mojodi: "5"
    }]

    products.forEach(function (item) {
      document.getElementById("products").innerHTML += `
      <div class="col-sm-6 col-md-4 col-lg-3">
          <div class="box">
            <a href="">
              <div class="img-box">
                <img src="${item.img}" alt="">
              </div>
              <div class="detail-box">
                <h6>
                  ${item.title}
                </h6>
                <h6>
                  Price
                  <span>
                   $ ${item.price}
                  </span>
                </h6>
              </div>
              <div class="new">
                <span>
                  New
                </span>
              </div>
            </a>
          </div>
          <button  onclick="addtocart(${item.id})" onmousedown="party.confetti(this)"  style="width: 100%;padding: 5px;background-color: #db4f66;color: white;border:none;">+</button>
<input value="0" data-product-count="${item.id}" style="width: 100%;">
<button  onclick="removefromcart(${item.id})"   style="width: 100%;padding: 5px;background-color: #db4f66;color: white;border:none;">-</button>
    </div>
        </div> 
            `

    })









    let showproducts = function (x) {

      $('#products').html('');

      for (let i = 0; i < x.length; i++)
        $('#products').append(
          `<div class="col-sm-6 col-md-4 col-lg-3">
          <div class="box">
            <a href="">
              <div class="img-box">
                <img src="${x[i].img}" alt="">
              </div>
              <div class="detail-box">
                <h6>
                  ${x[i].title}
                </h6>
                <h6>
                  Price
                  <span>
                   $ ${x[i].price}
                  </span>
                </h6>
              </div>
              <div class="new">
                <span>
                  New
                </span>
              </div>
            </a>
          </div>
          <button  onclick="addtocart(${x[i].id})" onmousedown="party.confetti(this)"  style="width: 100%;padding: 5px;background-color: #db4f66;color: white;border:none;">+</button>
<input value="0" data-product-count="${x[i].id}" style="width: 100%;">
<button  onclick="removefromcart(${x[i].id})"   style="width: 100%;padding: 5px;background-color: #db4f66;color: white;border:none;">-</button>
    </div>
        </div> 
          
        `)
      // cart.forEach(function (item) {
      //   document.querySelector(`[data-product-count="${item.product_id}"]`).value = item.count;

      // })

    }




    let cart = [];
    if (localStorage.getItem('cart') != null) {
      let txt = localStorage.getItem('cart');
      cart = JSON.parse(txt);
      fillcart();
    }




    // renge slider



    // renge slider jqueryui
    $(function () {
      $("#slider-range").slider({
        range: true,
        min: 0,
        max: 1000,
        values: [0, 1000],
        slide: function (event, ui) {
          $("#amount").val("$" + ui.values[0] + " - $" + ui.values[1]);
          let min = ui.values[0];
          let max = ui.values[1];
          updatproducts(products, min, max)
        }
      });
      $("#amount").val("$" + $("#slider-range").slider("values", 0) +
        " - $" + $("#slider-range").slider("values", 1));
    });



    function updatproducts(products, min, max) {
      let filterproducts = _.filter(products, function (item) {
        return item.price >= min && item.price <= max;
      })

      showproducts(filterproducts);

    }



    function addtocart(id) {

      let index = cart.findIndex(function (item) {
        return item.product_id == id;
      })

      let p = getproductbyid(id)

      if (index == -1) {
        cart.push({
          product_id: id,
          product_title: p.title,
          product_price: p.price,
          count: 1,
          total_price: p.price

        })
        document.querySelector(`[data-product-count="${p.id}"]`).value = 1
      } else {
        if (cart[index].count == p.mojodi) {
          alert('mahsol mojod nist')
        } else {

          cart[index].count += 1;
          cart[index].total_price = cart[index].count * cart[index].product_price
          document.querySelector(`[data-product-count="${p.id}"]`).value = cart[index].count
        }
      }
      localStorage.setItem('cart', JSON.stringify(cart));
      fillcart();
    }


    function removefromcart(id) {
      let index = cart.findIndex(function (item) {
        return item.product_id == id;
      })
      let p = getproductbyid(id)
      if (index == -1) {
        alert('mojod nist')
      } else {
        if (cart[index].count == 1) {

          document.querySelector(`[data-product-count="${p.id}"]`).value = 0;
          cart.splice(index, 1);


        } else {
          cart[index].count -= 1;
          cart[index].total_price = cart[index].count * cart[index].product_price
          document.querySelector(`[data-product-count="${p.id}"]`).value = cart[index].count;
        }
      }
      localStorage.setItem('cart', JSON.stringify(cart));
      fillcart();
    }



    function getproductbyid(id) {
      let index = products.findIndex(function (item) {
        return item.id == id
      })
      return products[index];
    }


    function showsidnav() {
      document.getElementById("sidnav").style.right = "0"
    }
    function hidesidnav() {
      document.getElementById('sidnav').style.right = "-300px"
    }


    function fillcart() {
      let totalprice = 0;
      document.getElementById('cartItem').innerHTML = ``;
      cart.forEach(function (item) {
        document.getElementById('cartItem').innerHTML += `
    <li>${item.product_title}-${item.count}-$${item.product_price}-$${item.total_price}</li> `;
        totalprice += item.product_price;
        document.querySelector(`[data-product-count="${item.product_id}"]`).value = item.count;
      })

      document.getElementById('cartItem').innerHTML += `<li style="padding: 10PX;margin: 10px;border: 1px solid rgb(255, 255, 255);">total price=$${totalprice}</li>`
    }


    // sweetalert
    function sure() {
      swal("Are you sure your purchase is complete ?", {
        buttons: ["Oh noez!", true],
      });


    }

    // renge slider


    // ******************
    // let fillcart2 = function (cart, min, max) {
    //   let totalprice = 0;
    //   document.getElementById('cartItem').innerHTML = ``;
    //   let filterproductscart = _.filter(cart, function (item) {
    //     return item.product_price >= min && item.product_price <= max;
    //   })
    //   filterproductscart.forEach(function (item) {
    //     document.getElementById('cartItem').innerHTML += `
    // <li>${item.product_title}-${item.count}-$${item.product_price}-$${item.total_price}</li> `;
    //     totalprice += item.product_price;
    //     document.querySelector(`[data-product-count="${item.product_id}"]`).value = item.count;
    //   })

    //   document.getElementById('cartItem').innerHTML += `<li style="padding: 10PX;margin: 10px;border: 1px solid rgb(255, 255, 255);">total price=$${totalprice}</li>`
    // }




    // datepicker
    $(function () {
      var dateFormat = "mm/dd/yy",
        from = $("#from")
          .datepicker({
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 3
          })
          .on("change", function () {
            to.datepicker("option", "minDate", getDate(this));
          }),
        to = $("#to").datepicker({
          defaultDate: "+1w",
          changeMonth: true,
          numberOfMonths: 3
        })
          .on("change", function () {
            from.datepicker("option", "maxDate", getDate(this));
          });

      function getDate(element) {
        var date;
        try {
          date = $.datepicker.parseDate(dateFormat, element.value);
        } catch (error) {
          date = null;
        }

        return date;
      }
    });



  </script>
</body>

</html>